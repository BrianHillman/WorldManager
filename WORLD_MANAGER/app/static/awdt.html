<!doctype html>
<html>
    <head>
        <title>
            Bootstrap HTML5 Skeleton
        </title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./bootstrap/css/bootstrap.css" />
        <link rel="stylesheet" href="./bootstrap/bootstrap-responsive.css" />
    </head>
    <body>
        <div class="container">
        <ul class="nav nav-tabs">
    <li class="active">
    <a href="#">Home</a>

    </li>

    <li><a href="#">Profile</a>

    </li>
    <li><a href="#">Message</a></li>

      </ul>
      <div class="row">
      <div class="span6">
      <h3>Search Rottentomatoes</h3>
      <p>General search of Rotten Tomatoes for Movies and Cast</p>
    <form id="tomatoes" name="tomatoes" class="well form-search" action="">
        <input name="q"  type="text" class="input-medium search-query">
         <button id="getrotten" name="getrotten" type="button"
class="btn">Search</button>
    </form>
</div>
<div class="span6">

          <div class="row">
          <div class="span6 well">

</div>
    </div>

          <div id="tresults">

          </div>
          </div>
            </div>

        </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/mustache.js"></script>

<script>
$(document).ready(function() {
    console.log("Document Ready");
    $("#tomatoes").submit(function() { return false;});
    $("#getrotten").click(function() {

        $.ajax({
            url: "/searchtomatoes",
            data: $("#tomatoes").serialize(),
            dataType: 'json',
            success: function(json) {

            // json.movies.abridged_cast[0].name
            var cast = {
                list: json.movies[0].abridged_cast
            };
            console.log(cast);
            var tpl = "Actors:<ul>{{#list}} <li> {{name}}, {{id}} </li>{{/list}}</ul>";
            var html = Mustache.to_html(tpl, cast);
            $('#tresults').html(html);



            }
        });
    });
});
</script>
    </body>
</html>